mixin menu(active)
	div.navbar.navbar-fixed-top
		div.navbar-inner
			.container-fluid
				a.btn.btn-navbar(data-toggle="collapse",data-target=".nav-collapse") 
					span.icon-bar
					span.icon-bar
					span.icon-bar
					a.brand(href="/news/map") YAKWALA
					
					div.btn-group.pull-right
						- if (session)
							a.btn.dropdown-toggle(href="#",data-toggle="dropdown")
								i.icon-user
								span= ' '+session.login+' ';
								span.caret
							ul.dropdown-menu
								li
									a(href="/settings/profile") Mon profil
								li
									a(href="/settings/alerts") Mes alertes
								li.divider
								li
									a(href="/user/logout") Quitter
						- else
							span 
								a.btn(href="/user/login") Login
					- if (active == 'map' || active == 'post')		
						div.btn-group.pull-right
							&nbsp;&nbsp;&nbsp;
							span
								span.btn#zoneLocButton(title="Mes favoris")
									i.icon-star 
									&nbsp;Mes endroits favoris
							&nbsp;&nbsp;&nbsp;
							span	
								span.btn#arroundme(title="Autour de moi")
									i.icon-home 
							&nbsp;&nbsp;&nbsp;

					div.nav-collapse
						ul.nav
							- if (active == 'map')
								li.active
									a(href="/news/map") Dashboard
							- else
								li
									a(href="/news/map") Dashboard
							- if(active == 'places')
								li.active
									a(href="/news/feed") Places
										span1#placenumber
							- else
								li
									a(href="/news/feed") Places
										span1#placenumber
							- if (active == 'infos')
								li.active
									a(href="/news/post") Infos
										span1#infonumber
							- else
								li
									a(href="/news/post") Infos
										span1#infonumber
							- if (active == 'comments')
								li.active
									a(href="/place/add") Comments
										span1#commentnumber
							- else
								li
									a(href="/place/add") Comments
										span1#commentnumber
							- if (active == 'yakcats')										
								li.active
									a(href="/user/login") Yakcats
										span1#catnumber
							- else
								li
									a(href="/user/login") Yakcats
										span1#catnumber
							- if (active == 'users')										
								li.active
									a(href="/user/login") Users
										span1#usernumber
							- else
								li
									a(href="/user/login") Users
										span1#usernumber

	script

		$(document).ready(function() {
			$.getJSON('/api/validinfos', function(data) {
				if (data.info != 0)
					$('#infonumber').addClass('badge badge-important').html(data.info);
			});

			$.getJSON('/api/validusers', function(data) {
				if (data.info != 0)
					$('#usernumber').addClass('badge badge-important').html(data.info);
			});

			$.getJSON('/api/validcats', function(data) {
				if (data.info != 0)
					$('#catnumber').addClass('badge badge-important').html(data.info);
			});

			$.getJSON('/api/validplaces', function(data) {
				if (data.info != 0)
					$('#placenumber').addClass('badge badge-important').html(data.info);
			});
		});
